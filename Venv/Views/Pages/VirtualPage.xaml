<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Venv.Views.Pages.VirtualPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Venv.Views.Pages"
    xmlns:local2="using:Venv.Common.Converters"
    xmlns:local3="using:Venv.Models"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:dataGrid="using:CommunityToolkit.WinUI.UI.Controls"
    Background="{ThemeResource AncNormalLinearBackground}"
    mc:Ignorable="d">

    <Page.Resources>
        <!-- Cell Style to increase font size -->
        <Style x:Key="DataGridCellStyle" TargetType="dataGrid:DataGridCell">
            <Setter Property="FontSize" Value="18"/>
            <!-- You can adjust more properties here as needed -->
        </Style>
        <SolidColorBrush x:Key="VmRunningBrush" Color="Green" />

        <SolidColorBrush x:Key="VmStoppedBrush" Color="Red" />

        <SolidColorBrush x:Key="DpuRunningBrush" Color="Green" />

        <SolidColorBrush x:Key="DpuStoppedBrush" Color="Red" />

        <local2:BoolToBrushConverter 

        x:Key="BoolToBrushConverter" 

        FalseBrush="{StaticResource VmStoppedBrush}" 

        TrueBrush="{StaticResource VmRunningBrush}" />

        <local2:StatusToVisibilityConverter x:Key="StatusToVisibilityConverter" />

        <local2:DpuStatusToBrushConverter 

        x:Key="DpuStatusToBrushConverter" 

        FalseBrush="{StaticResource VmStoppedBrush}" 

        TrueBrush="{StaticResource VmRunningBrush}" />

        <local2:IsSelectedToOpacityConverter x:Key="IsSelectedToOpacityConverter" />
    </Page.Resources>
    <StackPanel Margin="12">
        <controls:DataGrid x:Name="DpusDataGrid"
               ItemsSource="{x:Bind ViewModel.DpuList, Mode=OneWay}"
               AutoGenerateColumns="False"
               RowHeight="40"
               SelectionMode="Single"
                       
               SelectedItem="{x:Bind ViewModel.SelectedDpu, Mode=TwoWay}"
               IsReadOnly="True">
            <controls:DataGrid.Columns>
                <controls:DataGridTextColumn Header="DPU Number" Binding="{Binding Number}"/>
                <controls:DataGridTemplateColumn Header="Status">
                    <controls:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Ellipse 
                        Grid.Column="1" 
                        Width="7" 
                        Height="7" 
                        Margin="5,0,0,0" 
                         Fill="{Binding Status, Converter={StaticResource DpuStatusToBrushConverter}, Mode=OneWay}"
                         Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, Mode=OneWay}"

 />
                                <ProgressRing 

             Grid.Column="1" 

                        Width="10" 

                        Height="10" 

                        IsActive="True" 

                        Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter='invert', Mode=OneWay}" />


                            </StackPanel>
                        </DataTemplate>
                    </controls:DataGridTemplateColumn.CellTemplate>
                </controls:DataGridTemplateColumn>
                <controls:DataGridTextColumn Header="SioModuleID" Binding="{Binding SioModuleID}"/>
            </controls:DataGrid.Columns>
        </controls:DataGrid>

        <controls:DataGrid ItemsSource="{x:Bind ViewModel.SelectedDpu.LineSetups, Mode=OneWay}"
               AutoGenerateColumns="False"
               IsReadOnly="True">
            <controls:DataGrid.Columns>
                <controls:DataGridTextColumn Header="Channel Number" Binding="{Binding SioChannelNumber}"/>
                <controls:DataGridTextColumn Header="Channel Info" Binding="{Binding ChannelInfo}"/>
                <controls:DataGridTextColumn Header="Baud Rate" Binding="{Binding BaudRate}"/>
                <controls:DataGridTextColumn Header="Line Format" Binding="{Binding LineFormat}"/>
                <controls:DataGridTextColumn Header="Handshake" Binding="{Binding Handshake}"/>
                <controls:DataGridTextColumn Header="RS Specification" Binding="{Binding RsSpecification}"/>
            </controls:DataGrid.Columns>
        </controls:DataGrid>
    </StackPanel>
    

</Page>


